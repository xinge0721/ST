<head><script type="module">function s(){try{const s=substitudeMacros('{{char}}')||'未知角色';$('#char-name').text(s);const a=getCurrentMessageId();$('#message-id').text(a);const n=getChatMessages(a);if(n&&n.length>0){const s=n[0].message,t=s.length>100?s.substring(0,100)+'...':s;$('#current-message').text(t),function(s){const t={test:/<test>(.*?)<\/test>/gi,info:/<info>(.*?)<\/info>/gi,status:/<status>(.*?)<\/status>/gi};for(const[a,n]of Object.entries(t)){const t=[...s.matchAll(n)];if(t.length>0){const s=t.map(s=>s[1].trim()).filter(s=>s),n=s.length>1?s.join(' | '):s[0]||'空值';$(`#${a}-data .value`).text(n).removeClass('not-found').addClass('found'),$(`#${a}-data`).addClass('updated'),setTimeout(()=>{$(`#${a}-data`).removeClass('updated')},500)}else $(`#${a}-data .value`).text('未找到').removeClass('found').addClass('not-found')}!function(s){const t=/<(\w+)>(.*?)<\/\1>/gi,a=[...s.matchAll(t)];if(a.length>0){const s={};a.forEach(t=>{const a=t[1].toLowerCase();s[a]=(s[a]||0)+1});const t=Object.entries(s).map(([s,t])=>`${s}(${t})`).join(', ');console.log(`📊 标签统计: ${t}`)}}(s)}(s)}else t()}catch(s){console.log('获取信息失败:',s),$('#char-name').text('获取失败'),t()}}function t(){$('.data-item .value').text('未找到').removeClass('found').addClass('not-found')}$(()=>{$('#mobile-app').html('\n    <div class="mobile-container">\n      <div class="mobile-header">\n        <div class="avatar">{{char}}</div>\n        <div class="status">在线</div>\n      </div>\n\n      <div class="mobile-content">\n        <div class="info-card">\n          <h3>角色信息</h3>\n          <p>当前角色：<span id="char-name">加载中...</span></p>\n          <p>当前楼层：<span id="message-id">0</span></p>\n        </div>\n\n        <div class="action-buttons">\n          <button id="refresh-btn" class="btn primary">刷新信息</button>\n          <button id="copy-btn" class="btn secondary">复制角色名</button>\n        </div>\n\n        <div class="message-display">\n          <h4>当前消息</h4>\n          <div id="current-message">暂无消息</div>\n        </div>\n\n        <div class="captured-data">\n          <h4>捕获的数据</h4>\n          <div id="test-data" class="data-item">\n            <span class="label">test标签:</span>\n            <span class="value">未找到</span>\n          </div>\n          <div id="info-data" class="data-item">\n            <span class="label">info标签:</span>\n            <span class="value">未找到</span>\n          </div>\n          <div id="status-data" class="data-item">\n            <span class="label">status标签:</span>\n            <span class="value">未找到</span>\n          </div>\n        </div>\n      </div>\n    </div>\n  '),s(),$('#refresh-btn').click(()=>{s(),toastr.success('信息已刷新')}),$('#copy-btn').click(()=>{const s=$('#char-name').text();navigator.clipboard.writeText(s),toastr.info('角色名已复制到剪贴板')}),toastr.info('手机界面加载完成')});</script><style>.mobile-container{max-width:320px;margin:0 auto;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);border-radius:20px;overflow:hidden;box-shadow:0 10px 30px rgba(0,0,0,.3);color:#fff;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif}.mobile-header{background:hsla(0,0%,100%,.1);padding:15px 20px;display:flex;align-items:center;gap:15px;backdrop-filter:blur(10px)}.mobile-header .avatar{width:40px;height:40px;background:hsla(0,0%,100%,.2);border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:bold;font-size:16px}.mobile-header .status{font-size:14px;opacity:.8}.mobile-content{padding:20px}.info-card{background:hsla(0,0%,100%,.1);border-radius:15px;padding:15px;margin-bottom:20px;backdrop-filter:blur(10px)}.info-card h3{margin:0 0 10px 0;font-size:18px;font-weight:600}.info-card p{margin:8px 0;font-size:14px;opacity:.9}.info-card p span{font-weight:600;color:#fff}.action-buttons{display:flex;gap:10px;margin-bottom:20px}.action-buttons .btn{flex:1;padding:12px;border:none;border-radius:10px;font-size:14px;font-weight:600;cursor:pointer;transition:all .3s ease}.action-buttons .btn.primary{background:hsla(0,0%,100%,.9);color:#333}.action-buttons .btn.primary:hover{background:#fff;transform:translateY(-2px)}.action-buttons .btn.secondary{background:hsla(0,0%,100%,.2);color:#fff;border:1px solid hsla(0,0%,100%,.3)}.action-buttons .btn.secondary:hover{background:hsla(0,0%,100%,.3);transform:translateY(-2px)}.message-display{background:rgba(0,0,0,.2);border-radius:15px;padding:15px;margin-bottom:20px}.message-display h4{margin:0 0 10px 0;font-size:16px;font-weight:600}.message-display #current-message{font-size:13px;line-height:1.4;opacity:.9;max-height:100px;overflow-y:auto}.captured-data{background:hsla(0,0%,100%,.1);border-radius:15px;padding:15px;backdrop-filter:blur(10px)}.captured-data h4{margin:0 0 15px 0;font-size:16px;font-weight:600;color:#fff;text-align:center}.captured-data .data-item{display:flex;justify-content:space-between;align-items:center;padding:8px 12px;margin-bottom:8px;background:hsla(0,0%,100%,.1);border-radius:8px;border-left:3px solid rgba(0,0,0,0);transition:all .3s ease}.captured-data .data-item .label{font-size:13px;font-weight:500;opacity:.8;min-width:70px}.captured-data .data-item .value{font-size:13px;font-weight:600;text-align:right;flex:1;margin-left:10px}.captured-data .data-item .value.found{color:#4ade80;border-left-color:#4ade80}.captured-data .data-item .value.not-found{color:#94a3b8;opacity:.6}.captured-data .data-item.updated{background:rgba(74,222,128,.2);border-left-color:#4ade80;transform:scale(1.02)}.captured-data .data-item:last-child{margin-bottom:0}@media (max-width:350px){.mobile-container{max-width:95%;margin:10px auto}.action-buttons{flex-direction:column}}
</style></head><body><div id="mobile-app"></div></body>