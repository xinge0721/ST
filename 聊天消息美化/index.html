<head><script type="module">const n={test:{icon:'🔍',color:'#007bff',name:'测试',bgColor:'#e3f2fd'},info:{icon:'ℹ️',color:'#17a2b8',name:'信息',bgColor:'#e0f7ff'},status:{icon:'📊',color:'#28a745',name:'状态',bgColor:'#e8f5e9'},data:{icon:'📋',color:'#6c757d',name:'数据',bgColor:'#f8f9fa'},note:{icon:'📝',color:'#ffc107',name:'备注',bgColor:'#fff8e1'},alert:{icon:'⚠️',color:'#dc3545',name:'警告',bgColor:'#ffebee'},success:{icon:'✅',color:'#28a745',name:'成功',bgColor:'#e8f5e9'},error:{icon:'❌',color:'#dc3545',name:'错误',bgColor:'#ffebee'}};$(()=>{const o=$('#chat-container'),e=window.chatData||'';if(!e)return void o.html('<div class="empty">无消息数据</div>');const t=function(n){const o=/<(\w+)>(.*?)<\/\1>/g,e=[];let t;for(;null!==(t=o.exec(n));){const n=new Date;e.push({type:t[1],content:t[2].trim(),time:`${n.getHours().toString().padStart(2,'0')}:${n.getMinutes().toString().padStart(2,'0')}`})}return e}(e);if(0===t.length)return void o.html('<div class="empty">未找到有效消息</div>');const c=`\n    <div class="chat-window">\n      <div class="header">\n        <span class="title">💬 消息 (${t.length})</span>\n      </div>\n      <div class="messages">\n        ${t.map((o,e)=>function(o,e){const t=n[o.type]||{icon:'💬',color:'#999',name:o.type,bgColor:'#f5f5f5'},c=e%2==1;return`\n    <div class="message ${c?'right':'left'}">\n      <div class="avatar" style="background: ${t.color};">${t.icon}</div>\n      <div class="content">\n        <div class="header">\n          <span class="name" style="color: ${t.color};">${t.name}</span>\n          <span class="time">${o.time}</span>\n        </div>\n        <div class="bubble" style="background: ${c?'#95ec69':t.bgColor}; ${c?'':`border-left: 3px solid ${t.color};`}">\n          ${o.content}\n        </div>\n      </div>\n    </div>\n  `}(o,e)).join('')}\n      </div>\n    </div>\n  `;o.html(c)});</script><style>#chat-container{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif}.chat-window{display:inline-block;background:#f5f5f5;border-radius:12px;overflow:hidden;min-width:280px;max-width:400px;box-shadow:0 2px 12px rgba(0,0,0,.1)}.header{background:#fff;padding:12px 16px;border-bottom:1px solid #e5e5e5}.header .title{font-size:14px;font-weight:600;color:#333}.messages{padding:12px;max-height:400px;overflow-y:auto;background:#f5f5f5}.message{display:flex;margin-bottom:12px;align-items:flex-start}.message.left{flex-direction:row}.message.left .avatar{margin-right:8px}.message.left .content{align-items:flex-start}.message.left .header{justify-content:flex-start}.message.right{flex-direction:row-reverse}.message.right .avatar{margin-left:8px}.message.right .content{align-items:flex-end}.message.right .header{justify-content:flex-end}.message.right .bubble{background:#95ec69 !important;border:none !important;color:#000}.avatar{width:32px;height:32px;border-radius:4px;display:flex;align-items:center;justify-content:center;font-size:14px;flex-shrink:0;box-shadow:0 1px 3px rgba(0,0,0,.1)}.content{display:flex;flex-direction:column;max-width:65%}.content .header{display:flex;align-items:center;gap:6px;margin-bottom:4px;padding:0 2px}.content .header .name{font-size:11px;font-weight:500}.content .header .time{font-size:10px;color:#999}.bubble{background:#fff;border-radius:8px;padding:10px 12px;font-size:13px;line-height:1.4;word-break:break-word;box-shadow:0 1px 2px rgba(0,0,0,.05)}.empty{text-align:center;padding:40px 20px;color:#999;font-size:13px}.messages::-webkit-scrollbar{width:4px}.messages::-webkit-scrollbar-track{background:rgba(0,0,0,0)}.messages::-webkit-scrollbar-thumb{background:#ccc;border-radius:2px}.messages::-webkit-scrollbar-thumb:hover{background:#aaa}
</style></head><body><div id="chat-container"></div></body>